{% extends 'base.html.twig' %}

{% block title %}User{% endblock %}

{% block body %}
    <div class="user-index-h1">
        <h1>Messagerie</h1>
    </div>
	<section class="container">
		<div class="row">
			<div class="col-12">
				<p><b>{{ app.user.received|length }}</b> messages reçus</p>
			</div>
			<div class="col-12">
				<a href="{{ path('sent') }}">Voir les messages envoyés </a>
			</div>
			{% for message in app.user.received %}
			<div>
				<div class="col-3">Auteur: <a href="{{ path('user_show', {slug: message.sender.slug}) }}">{{ message.sender.lastname ~ " " ~ message.sender.firstname }}</a></div>
				<div class="message-user">Sujet: <h6>{{ message.title }}</h6></div>
				<div class="message-user">Date: <h6>{{ message.createdAt|date("d/m/Y H:i") }}</h6></div>
				<div class="message-user">Message: <h6>{{ message.message }}</h6></div>
				<div class="col-3 pb-2"><a href="{{ path("send", {slug: message.sender.slug}) }}" class="btn btn-secondary">Répondre</a></div>
			</div>
			{% endfor %}
		</div>
	</section>

{% endblock %}
